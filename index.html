<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMW Software Works - Ultimate Guide & Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['Fira Code', 'monospace'],
                    },
                    colors: {
                        primary: { DEFAULT: '#0066B1', light: '#E6F0F7', dark: '#004C8C' },
                        accent: { DEFAULT: '#34D399', light: '#EBFBF5' },
                        neutral: { 50: '#F8FAFC', 100: '#F1F5F9', 200: '#E2E8F0', 300: '#CBD5E1', 400: '#94A3B8', 500: '#64748B', 600: '#475569', 700: '#334155', 800: '#1E293B', 900: '#0F172A' }
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        highlight: { '0%': { backgroundColor: 'rgba(0, 102, 177, 0.1)' }, '100%': { backgroundColor: 'transparent' } }
                    },
                    animation: {
                        fadeIn: 'fadeIn 0.4s ease-out forwards',
                        highlight: 'highlight 1.5s ease-out',
                    }
                },
            },
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400&display=swap');
        body { font-family: 'Inter', sans-serif; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #E2E8F0; }
        ::-webkit-scrollbar-thumb { background: #CBD5E1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94A3B8; }
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        details[open] summary ~ * { animation: fadeIn 0.3s ease-in-out; }
        .chevron { transition: transform 0.3s ease; }
        details[open] summary .chevron { transform: rotate(180deg); }

        /* Chat Modal Animation */
        #chat-panel {
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            will-change: transform;
            transform: translateY(110%); /* Start hidden below screen */
            z-index: 500; /* High z-index to cover everything */
        }
        body.chat-open #chat-panel {
            transform: translateY(0); /* Slide up to cover screen */
        }
        body.chat-open {
            overflow: hidden; /* Prevent scrolling background when chat is open */
        }

        /* Hide FAB when chat is open */
        #open-chat-btn {
            transition: transform 0.3s ease, opacity 0.3s ease;
            z-index: 100;
        }
        body.chat-open #open-chat-btn {
            transform: translateY(200%);
            opacity: 0;
            pointer-events: none;
        }

        /* Markdown Content Styles */
        .md-content h5 { font-size: 1.1rem; font-weight: 700; color: #1E293B; margin-top: 1rem; margin-bottom: 0.5rem; }
        .md-content p { margin-bottom: 0.75rem; line-height: 1.6; color: #334155; }
        .md-content ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 0.75rem; color: #334155; }
        .md-content ol { list-style-type: decimal; padding-left: 1.5rem; margin-bottom: 0.75rem; color: #334155; }
        .md-content li { margin-bottom: 0.25rem; }
        .md-content strong { color: #0F172A; font-weight: 600; }
        .md-content code { background: #E2E8F0; color: #DD1144; padding: 0.1rem 0.3rem; border-radius: 0.25rem; font-family: 'Fira Code', monospace; font-size: 0.9em; }
        .md-content pre { background: #0F172A; color: #F1F5F9; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; margin-bottom: 1rem; position: relative; }
        .md-content pre code { background: transparent; color: inherit; padding: 0; }
        .md-content a { color: #0066B1; text-decoration: underline; }

        /* Wizard Modal */
        #wizard-modal { transition: opacity 0.2s ease, visibility 0.2s; visibility: hidden; opacity: 0; }
        #wizard-modal.open { visibility: visible; opacity: 1; }
        #wizard-content { transform: scale(0.95); transition: transform 0.2s ease; }
        #wizard-modal.open #wizard-content { transform: scale(1); }

        /* Table Styles */
        .code-table th { text-align: left; padding: 0.75rem 1rem; background: #F8FAFC; color: #475569; font-weight: 600; border-bottom: 1px solid #E2E8F0; }
        .code-table td { padding: 0.75rem 1rem; border-bottom: 1px solid #E2E8F0; color: #334155; font-size: 0.9rem; }
        .code-table tr:last-child td { border-bottom: none; }
        .code-table code { background: #EFF6FF; color: #0066B1; padding: 2px 6px; border-radius: 4px; font-family: 'Fira Code', monospace; font-size: 0.85rem; }
        
        /* Highlight Animation */
        .target-highlight { animation: highlight 1.5s ease-out; }
        
        /* Tab switching */
        .tab-btn.active { background-color: #0066B1; color: white; }
    </style>
</head>
<body class="text-neutral-800 antialiased h-screen w-screen overflow-x-hidden relative bg-white">

    <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-primary-light via-white to-accent-light opacity-20 pointer-events-none z-0"></div>

    <div id="app-wrapper" class="h-full w-full">

        <!-- PANEL 1: THE GUIDE (Always Visible) -->
        <div id="guide-panel" class="w-full h-full flex flex-col">
            <header class="sticky top-0 z-20 bg-white/70 backdrop-blur-lg border-b border-neutral-200">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-9 h-9 bg-primary flex items-center justify-center rounded-lg text-white font-bold text-lg shadow-lg shadow-primary/20">B</div>
                        <h1 class="text-lg font-semibold text-neutral-900 tracking-tight">BMW Software Guide</h1>
                    </div>
                    <nav class="hidden lg:flex items-center gap-6 text-sm font-medium text-neutral-500">
                        <a href="#part-1" class="hover:text-primary transition-colors">Setup</a>
                        <a href="#part-2" class="hover:text-primary transition-colors">BimmerCode</a>
                        <a href="#part-8" class="hover:text-primary transition-colors">BimmerUtility</a>
                        <a href="#part-esys" class="hover:text-primary transition-colors">E-Sys</a>
                        <a href="#part-service" class="hover:text-primary transition-colors">Service History</a>
                    </nav>
                </div>
            </header>
            <main class="flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8 scroll-smooth pb-24">
                <div class="max-w-4xl mx-auto space-y-6">
                    <div class="text-center py-10 animate-fadeIn">
                        <h2 class="text-4xl md:text-5xl font-bold text-neutral-900 mb-3 tracking-tight">G-Chassis Developer Guide</h2>
                        <p class="text-lg text-neutral-500 max-w-2xl mx-auto">The essential guide to diagnostics, programming, and coding for modern BMWs (G20, G80, etc.).</p>
                    </div>
                    
                    <div class="bg-red-50 border border-red-200 rounded-2xl p-6 flex gap-4 items-start animate-fadeIn" style="animation-delay: 0.1s;">
                        <div class="flex-shrink-0 text-red-500 mt-1"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L1 21h22L12 2zm1 15h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg></div>
                        <div>
                            <h3 class="text-lg font-bold text-red-800 mb-2">Critical Safety Warning</h3>
                            <p class="text-red-700 mb-3">Modifying your vehicle's electronic systems involves significant risk.</p>
                            <ul class="list-disc list-inside text-sm text-red-600 space-y-1.5">
                                <li><strong>Stable Power is Mandatory:</strong> For any programming or flashing, a <strong>50A+ voltage-stable power supply</strong> is non-negotiable.</li>
                                <li><strong>Irreversible Damage Risk:</strong> An interrupted flash can permanently "brick" essential control units (MGU, DME).</li>
                                <li><strong>Expert Mode Disclaimer:</strong> Standard coding is safe. Expert Mode (editing raw values) bypasses safety checks and is done at your own risk.</li>
                            </ul>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <!-- SETUP -->
                        <details id="part-1" class="group bg-white border border-neutral-200 rounded-2xl overflow-hidden transition-all hover:border-primary/50 shadow-sm" open>
                            <summary class="flex justify-between items-center p-5 cursor-pointer select-none hover:bg-neutral-50 transition-colors">
                                <div class="flex items-center gap-4">
                                    <div class="bg-primary-light p-3 rounded-lg text-primary"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"/></svg></div>
                                    <div><h3 class="text-lg font-semibold text-neutral-900">1. Connection & Hardware</h3><p class="text-sm text-neutral-500">Physical interfaces and software tools.</p></div>
                                </div>
                                <svg class="chevron w-5 h-5 text-neutral-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                            </summary>
                            <div class="px-5 pb-5 border-t border-neutral-200/80 pt-4">
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div class="bg-neutral-50 border border-neutral-200/80 p-4 rounded-xl">
                                        <h4 class="text-neutral-800 font-semibold mb-2">Mobile (BimmerCode/Link)</h4>
                                        <p class="text-sm text-neutral-500 mb-3">For light coding and battery reg.</p>
                                        <ul class="text-sm text-neutral-600 space-y-2">
                                            <li><span class="font-semibold text-primary">Recommended:</span> MHD Universal (Black), UniCarScan.</li>
                                            <li><span class="font-semibold text-red-500">Avoid:</span> Cheap ELM327 clones.</li>
                                        </ul>
                                    </div>
                                    <div class="bg-neutral-50 border border-neutral-200/80 p-4 rounded-xl">
                                        <h4 class="text-neutral-800 font-semibold mb-2">PC (ISTA+/E-Sys)</h4>
                                        <p class="text-sm text-neutral-500 mb-3">For heavy diagnostics and flashing.</p>
                                        <ul class="text-sm text-neutral-600 space-y-2">
                                            <li><strong><span class="text-primary">Cable:</span></strong> E-NET Cable (Ethernet to OBD).</li>
                                            <li><strong><span class="text-primary">Software:</span></strong> BimmerUtility is recommended for FDL coding.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </details>

                        <!-- CODING LIBRARY (SPLIT STANDARD VS EXPERT) -->
                        <details id="part-2" class="group bg-white border border-neutral-200 rounded-2xl overflow-hidden transition-all hover:border-primary/50 shadow-sm">
                            <summary class="flex justify-between items-center p-5 cursor-pointer select-none hover:bg-neutral-50 transition-colors">
                                <div class="flex items-center gap-4">
                                    <div class="bg-accent-light p-3 rounded-lg text-accent"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/></svg></div>
                                    <div><h3 class="text-lg font-semibold text-neutral-900">2. BimmerCode Library</h3><p class="text-sm text-neutral-500">Divided into Normal & Expert Modes.</p></div>
                                </div>
                                <svg class="chevron w-5 h-5 text-neutral-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                            </summary>
                            <div class="px-5 pb-5 border-t border-neutral-200/80 pt-4">
                                
                                <!-- TABS -->
                                <div class="flex gap-2 mb-6 border-b border-neutral-200">
                                    <button class="tab-btn px-4 py-2 text-sm font-semibold rounded-t-lg bg-neutral-100 text-neutral-600 hover:bg-neutral-200 active" onclick="switchTab(this, 'tab-standard')">Standard Mode (Easy)</button>
                                    <button class="tab-btn px-4 py-2 text-sm font-semibold rounded-t-lg bg-neutral-100 text-neutral-600 hover:bg-neutral-200" onclick="switchTab(this, 'tab-expert')">Expert Mode (Advanced)</button>
                                </div>

                                <!-- TAB: STANDARD -->
                                <div id="tab-standard" class="tab-content space-y-6">
                                    <p class="text-sm text-neutral-600 bg-green-50 border border-green-100 p-3 rounded-lg">These features are available as simple toggles/menus in BimmerCode without entering Expert Mode.</p>
                                    
                                    <!-- BDC Standard -->
                                    <div>
                                        <h4 class="text-primary font-bold mb-3 text-sm">BDC (Body Domain Controller)</h4>
                                        <table class="w-full code-table">
                                            <thead><tr><th>Feature</th><th>Details</th></tr></thead>
                                            <tbody>
                                                <tr><td><strong>5-Blink Turn Signal</strong></td><td>Increases one-touch signal from 3 to 5.</td></tr>
                                                <tr><td><strong>Window Roll-up Interruption</strong></td><td>Allows window to keep closing even if door is opened.</td></tr>
                                                <tr><td><strong>Horn on Lock (Engine On)</strong></td><td>Disables the double honk when locking with engine running.</td></tr>
                                                <tr><td><strong>Rear DRLs</strong></td><td>Activates rear tail lights together with front DRLs.</td></tr>
                                                <tr><td><strong>Mirror Tilt in Reverse</strong></td><td>Adjust percentage (default is 70%, change to 50% or less).</td></tr>
                                                <tr><td><strong>Boot Opening Delay</strong></td><td>Set to 0.5s or 1s to prevent accidental opening.</td></tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <!-- HU_MGU Standard -->
                                    <div>
                                        <h4 class="text-primary font-bold mb-3 text-sm">HU_MGU (Headunit)</h4>
                                        <table class="w-full code-table">
                                            <thead><tr><th>Feature</th><th>Details</th></tr></thead>
                                            <tbody>
                                                <tr><td><strong>Bowers & Wilkins Profile</strong></td><td>Unlocks B&W sound settings (concert hall, etc.) for HK systems.</td></tr>
                                                <tr><td><strong>Legal Disclaimers</strong></td><td>Disables startup safety warnings/camera warnings.</td></tr>
                                                <tr><td><strong>Video in Motion</strong></td><td>Allows video playback while driving (requires restart).</td></tr>
                                                <tr><td><strong>M Startup Animation</strong></td><td>Changes iDrive boot logo to M.</td></tr>
                                                <tr><td><strong>Tire Pressure & Temp</strong></td><td>Displays tire temp alongside pressure.</td></tr>
                                                <tr><td><strong>Checkbox Front DRL</strong></td><td>Adds option in iDrive to toggle front DRLs.</td></tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <!-- ACSM / HKFM Standard -->
                                    <div>
                                        <h4 class="text-primary font-bold mb-3 text-sm">Other Modules</h4>
                                        <ul class="text-sm text-neutral-600 space-y-2">
                                            <li class="flex justify-between border-b border-neutral-100 pb-1"><span><strong>ACSM:</strong> Seatbelt Chimes</span> <span>Disable Driver/Passenger chimes independently.</span></li>
                                            <li class="flex justify-between border-b border-neutral-100 pb-1"><span><strong>HKFM:</strong> Tailgate Close</span> <span>Enable closing with Key Fob & Interior Button without long press.</span></li>
                                            <li class="flex justify-between border-b border-neutral-100 pb-1"><span><strong>DME:</strong> A/C Memory</span> <span>Remember last A/C setting (Off/On) after restart.</span></li>
                                            <li class="flex justify-between border-b border-neutral-100 pb-1"><span><strong>DKOMBI:</strong> Alpina Layout</span> <span>Change cluster to Alpina blue theme.</span></li>
                                        </ul>
                                    </div>
                                </div>

                                <!-- TAB: EXPERT -->
                                <div id="tab-expert" class="tab-content hidden space-y-8">
                                    <div class="bg-red-50 text-red-700 text-sm p-4 rounded-lg border border-red-200">
                                        <strong>EXPERT MODE WARNING:</strong> Requires editing raw HEX/Binary values. One wrong value can cause malfunctions. Always backup before coding.
                                    </div>

                                    <!-- Sport Plus / Comfort Plus -->
                                    <div>
                                        <h4 class="text-neutral-800 font-bold text-sm mb-2">1. Sport+ & Comfort+ Activation</h4>
                                        <p class="text-xs text-neutral-500 mb-3">Enables hidden driving modes. Requires coding in 3 modules.</p>
                                        <div class="overflow-x-auto border border-neutral-200 rounded-lg">
                                            <table class="w-full code-table">
                                                <thead><tr><th>Module</th><th>Section / Group</th><th>Function</th><th>Value</th></tr></thead>
                                                <tbody>
                                                    <tr><td><strong>BDC</strong></td><td>3221 PfFesMaster</td><td><code>FesSportWorldMode1</code></td><td><code>SportExpert</code> (0x02)</td></tr>
                                                    <tr><td><strong>BDC</strong></td><td>3221 PfFesMaster</td><td><code>FesComfortWorldMode1</code></td><td><code>ComfortPlus</code> (0x05)</td></tr>
                                                    <tr><td><strong>HU_MGU</strong></td><td>3008 FES</td><td><code>FES_SPORT_EXPERT</code></td><td><code>aktiv</code></td></tr>
                                                    <tr><td><strong>HU_MGU</strong></td><td>3008 FES</td><td><code>FES_COMFORT_PLUS</code></td><td><code>aktiv</code></td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <!-- Auto Steering Heat -->
                                    <div>
                                        <h4 class="text-neutral-800 font-bold text-sm mb-2">2. Auto Steering Wheel Heat Menu</h4>
                                        <p class="text-xs text-neutral-500 mb-3">Adds menu to auto-activate heat below specific temp.</p>
                                        <div class="overflow-x-auto border border-neutral-200 rounded-lg">
                                            <table class="w-full code-table">
                                                <thead><tr><th>Module</th><th>Section / Group</th><th>Function</th><th>Value</th></tr></thead>
                                                <tbody>
                                                    <tr><td><strong>HU_MGU</strong></td><td>3000 HMI_SPEECH</td><td><code>AKT_Auto_Lenkradheizung</code></td><td><code>aktiv</code></td></tr>
                                                    <tr><td><strong>BDC</strong></td><td>3142 PfLinLRE</td><td><code>LHZ_CCM_IKF</code></td><td><code>aktiv</code></td></tr>
                                                    <tr><td><strong>BDC</strong></td><td>3450 Others 1</td><td><code>IKF_ENABLE</code></td><td><code>ikf_alle_sitze</code></td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <!-- Misc Expert -->
                                    <div>
                                        <h4 class="text-neutral-800 font-bold text-sm mb-2">3. Miscellaneous Expert Coding</h4>
                                        <div class="space-y-3">
                                            <div class="bg-neutral-50 p-3 rounded border border-neutral-200">
                                                <h6 class="text-xs font-bold text-primary">Rear Camera Zoom (Towbar View)</h6>
                                                <p class="text-xs text-neutral-600">Module: <strong>HU_MGU</strong> > 300B Parken <br> Function: <code>Macro_trailer_coupling</code> > <code>aktiv</code></p>
                                            </div>
                                            <div class="bg-neutral-50 p-3 rounded border border-neutral-200">
                                                <h6 class="text-xs font-bold text-primary">Wireless Charging (Menu activation)</h6>
                                                <p class="text-xs text-neutral-600">Module: <strong>BDC</strong> > WcaWirelessChargingAblage > <code>WCA_ENABLE</code> > <code>aktiv</code><br>Module: <strong>HU_MGU</strong> > 3000 HMI_SPEECH > <code>WCA</code> > <code>aktiv</code></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </details>

                        <!-- BIMMERUTILITY (DEEP DIVE) -->
                        <details id="part-8" class="group bg-white border border-neutral-200 rounded-2xl overflow-hidden transition-all hover:border-primary/50 shadow-sm">
                            <summary class="flex justify-between items-center p-5 cursor-pointer select-none hover:bg-neutral-50 transition-colors">
                                <div class="flex items-center gap-4">
                                    <div class="bg-orange-100 p-3 rounded-lg text-orange-500"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/></svg></div>
                                    <div><h3 class="text-lg font-semibold text-neutral-900">3. BimmerUtility (Engineering)</h3><p class="text-sm text-neutral-500">Capabilities beyond BimmerCode.</p></div>
                                </div>
                                <svg class="chevron w-5 h-5 text-neutral-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                            </summary>
                            <div class="px-5 pb-5 border-t border-neutral-200/80 pt-4">
                                <p class="text-sm text-neutral-600 mb-4">BimmerUtility is a professional-grade tool that replaces E-Sys Launchers. It allows access to modules that are <strong>locked or invisible</strong> in BimmerCode.</p>
                                
                                <div class="grid md:grid-cols-2 gap-4 mb-6">
                                    <div class="border border-neutral-200 p-4 rounded-xl">
                                        <h5 class="text-sm font-bold text-neutral-800 mb-2">Exclusive Capabilities</h5>
                                        <ul class="text-xs text-neutral-600 space-y-2">
                                            <li class="flex items-start gap-2"><span class="text-primary">●</span> <span><strong>SAS3 Module Access:</strong> Required for coding Lane Change Assistant and other ADAS features (BimmerCode cannot access this).</span></li>
                                            <li class="flex items-start gap-2"><span class="text-primary">●</span> <span><strong>VO Coding (FA Editor):</strong> Easily add/remove option codes (e.g., 2TB Sport Trans, 5DN Parking Plus) and code the whole car to match.</span></li>
                                            <li class="flex items-start gap-2"><span class="text-primary">●</span> <span><strong>CAFD Compare:</strong> Compare your coding files against stock or other cars to find differences.</span></li>
                                        </ul>
                                    </div>
                                    <div class="border border-neutral-200 p-4 rounded-xl">
                                        <h5 class="text-sm font-bold text-neutral-800 mb-2">Top BimmerUtility Codes</h5>
                                        <ul class="text-xs text-neutral-600 space-y-2">
                                            <li><strong>Enable Lane Change Assist:</strong> Requires coding HU_MGU, BDC, and <u>SAS3</u>.</li>
                                            <li><strong>Anti-Dazzle High Beams (US):</strong> Requires VO Coding to remove "5AP" (Decoding Anti-Dazzle) and then FDL coding KAFAS/FLM modules.</li>
                                            <li><strong>Variable Light Distribution:</strong> Requires VO coding to remove "8S4".</li>
                                        </ul>
                                    </div>
                                </div>

                                <!-- SPORT TRANSMISSION FAQ -->
                                <div class="border-t border-neutral-200 pt-4">
                                    <h5 class="text-sm font-bold text-neutral-800 flex items-center gap-2 mb-3">EGS (Transmission) - Sport Auto (2TB) <span class="bg-neutral-200 text-[10px] px-1.5 py-0.5 rounded text-neutral-600">VO Coding Guide</span></h5>
                                    
                                    <div class="space-y-3 mb-4">
                                        <div class="bg-neutral-50 p-3 rounded-lg border border-neutral-200">
                                            <h6 class="text-xs font-bold text-neutral-700">1. Difference vs. Standard (205)</h6>
                                            <p class="text-xs text-neutral-600 mt-1">Option 2TB provides noticeably snappier shifts in Sport/Sport+ modes and holds gears longer. Shifts feel firmer (less torque smoothing).</p>
                                        </div>
                                        <div class="bg-neutral-50 p-3 rounded-lg border border-neutral-200">
                                            <h6 class="text-xs font-bold text-neutral-700">2. Are Paddle Shifters Required?</h6>
                                            <p class="text-xs text-neutral-600 mt-1"><strong>No.</strong> You can code 2TB without paddles. The transmission will behave aggressively as intended. <em class="text-neutral-400">(Note: A harmless "missing paddles" shadow error may appear in diagnostics, but it does not affect functionality).</em></p>
                                        </div>
                                        <div class="bg-neutral-50 p-3 rounded-lg border border-neutral-200">
                                            <h6 class="text-xs font-bold text-neutral-700">3. How to Activate Launch Control</h6>
                                            <p class="text-xs text-neutral-600 mt-1">Coding 2TB automatically enables Launch Control logic in the EGS.</p>
                                            <ol class="list-decimal list-inside text-xs text-neutral-600 mt-1 space-y-1 pl-1">
                                                <li>Drive 10km to warm up engine/transmission.</li>
                                                <li>Select <strong>Sport+</strong> (or DTC/Traction mode).</li>
                                                <li>Move shifter left to <strong>S/M</strong> gate.</li>
                                                <li>Press Brake <strong>hard</strong> with left foot.</li>
                                                <li>Floor Gas past the resistance point (kickdown). "Launch Control Active" flag appears on dash.</li>
                                                <li>Release Brake within 3 seconds.</li>
                                            </ol>
                                        </div>
                                    </div>

                                    <div class="bg-primary/5 border border-primary/20 p-3 rounded-lg">
                                        <p class="text-xs text-primary-dark mb-1 font-bold">Step-by-Step Coding (BimmerUtility):</p>
                                        <ol class="list-decimal list-inside text-xs text-neutral-700 space-y-1">
                                            <li>Connect BimmerUtility and go to <strong>Vehicle Order (FA)</strong>.</li>
                                            <li>In the "SALAPA-Elements" list, type <code>2TB</code> and click Add.</li>
                                            <li>Click <strong>Save</strong> to update the FA.</li>
                                            <li>Go to the <strong>Coding</strong> (ECU List) tab.</li>
                                            <li>Right-click the <strong>EGS</strong> (Transmission) module and select <strong>Code</strong> (This VO Codes the module).</li>
                                            <li>(Optional) Code BDC and DKOMBI if you want Sport+ menu items to appear correctly.</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </details>

                        <!-- E-SYS CODING (NEW SECTION) -->
                        <details id="part-esys" class="group bg-white border border-neutral-200 rounded-2xl overflow-hidden transition-all hover:border-primary/50 shadow-sm">
                            <summary class="flex justify-between items-center p-5 cursor-pointer select-none hover:bg-neutral-50 transition-colors">
                                <div class="flex items-center gap-4">
                                    <div class="bg-blue-100 p-3 rounded-lg text-blue-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/></svg></div>
                                    <div><h3 class="text-lg font-semibold text-neutral-900">5. E-Sys Coding (Advanced Flashing)</h3><p class="text-sm text-neutral-500">Firmware Flashing & Updates.</p></div>
                                </div>
                                <svg class="chevron w-5 h-5 text-neutral-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
                            </summary>
                            <div class="px-5 pb-5 border-t border-neutral-200/80 pt-4">
                                <div class="bg-red-50 border border-red-200 rounded-xl p-4 mb-6">
                                    <h4 class="text-red-800 font-bold flex items-center gap-2 mb-2"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg> High Risk Procedure</h4>
                                    <p class="text-sm text-red-700">This process involves <strong>flashing firmware</strong> to the transmission ECU. A voltage drop <strong>WILL brick</strong> the module. A <strong>50A+ Power Supply Unit (PSU)</strong> connected to the battery is mandatory. Do not use a battery charger.</p>
                                </div>

                                <!-- PROJECT 1: ALPINA (EXPANDED) -->
                                <div class="mb-8">
                                    <h4 class="text-lg font-bold text-neutral-800 mb-2">Project A: Enable ALPINA Transmission Software</h4>
                                    <p class="text-sm text-neutral-600 mb-4">Compatible with F/G-Series BMWs using ZF 8HP transmissions (typically 3.0L+ engines). Provides the specific ALPINA shift logic: buttery smooth in Comfort (displays D1, D2, etc.), and rapid shifting in Sport.</p>

                                    <div class="space-y-6">
                                        
                                        <!-- Step 1 -->
                                        <div class="bg-neutral-50 p-4 rounded-xl border border-neutral-200">
                                            <h5 class="font-bold text-sm text-neutral-800 mb-2">1. Preparation & Requirements</h5>
                                            <ul class="list-disc list-inside text-xs text-neutral-600 space-y-1">
                                                <li><strong>Power:</strong> Connect a 50A+ PSU. <span class="text-red-600">Voltage drops brick transmissions.</span></li>
                                                <li><strong>Hardware:</strong> ENET Cable + Windows Laptop.</li>
                                                <li><strong>Software:</strong> E-Sys with <strong>Full</strong> PSdZData (Lite version does not contain firmware files).</li>
                                                <li><strong>Backup:</strong> Read and save your original FA (Vehicle Order) and SVT before starting.</li>
                                            </ul>
                                        </div>

                                        <!-- Step 2 -->
                                        <div class="border-l-4 border-primary pl-4">
                                            <h5 class="font-bold text-neutral-800 text-sm mb-1">2. Edit Vehicle Order (FA)</h5>
                                            <p class="text-xs text-neutral-500 mb-2">We must "trick" E-Sys into thinking the car is an ALPINA model to calculate the correct firmware.</p>
                                            <ol class="list-decimal list-inside text-xs text-neutral-6
